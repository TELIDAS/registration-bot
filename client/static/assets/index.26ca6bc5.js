var E=Object.defineProperty,M=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var N=(t,a,o)=>a in t?E(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,P=(t,a)=>{for(var o in a||(a={}))$.call(a,o)&&N(t,o,a[o]);if(_)for(var o of _(a))j.call(a,o)&&N(t,o,a[o]);return t},O=(t,a)=>M(t,F(a));import{a as z,j as e,P as V,r as c,b as h,T as r,B as v,M as K,c as q,F as L,n as x,C as T,I as H,d as G,U as J,e as Q,R as X,f as U,g as Y,h as Z}from"./vendor.fbef1855.js";const ee=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&d(m)}).observe(document,{childList:!0,subtree:!0});function o(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function d(n){if(n.ep)return;n.ep=!0;const l=o(n);fetch(n.href,l)}};ee();var I=z.create({baseURL:"http://38.242.200.64:7777/bot/"});const te=t=>I.post("start/",t,{headers:{"Content-Type":"multipart/form-data"}}),ae=()=>I.post("stop/"),se=()=>I.post("continue/"),W=()=>I.get("info/"),ne=()=>I.get("running-status/"),oe=()=>I.get("recaptcha-balance/ "),re=t=>I.delete(`delete-info/${t}/`),le=(t,a=1)=>I.get(`tasks/${t}/?page=${a}`),ie=({className:t,totalItems:a,pageSize:o,onChange:d})=>e(V,{className:t,total:a,pageSize:o,hideOnSinglePage:!0,onChange:n=>d(n),showSizeChanger:!1});const ce=({dataSource:t,setDataSource:a})=>{const[o,d]=c.exports.useState([]),[n,l]=c.exports.useState(null),[m,y]=c.exports.useState(!1),[p,u]=c.exports.useState(!1),f=async()=>{const s=await W();a(s.data)},C=async(s,g=1)=>{y(!0);const S=await le(s,g);l(s),d(S.data),u(!0),y(!1)},w=async s=>{try{const g=await re(s);await f(),g.data.message&&x.success({message:g.data.message})}catch(g){g.response.data.message&&x.info({message:g.response.data.message})}};return c.exports.useEffect(()=>{f();const s=setInterval(f,30*1e3);return()=>{clearInterval(s)}},[]),h("div",{className:"Table",children:[h(r,{dataSource:t.results,pagination:!1,rowKey:"id",children:[e(r.Column,{dataIndex:"date_creation",title:"Date"}),e(r.Column,{align:"center",dataIndex:"successful",title:"Successful"}),e(r.Column,{align:"center",dataIndex:"failed",title:"Failed"}),e(r.Column,{align:"center",dataIndex:"total",title:"Total"}),e(r.Column,{align:"center",dataIndex:"t",title:"Logs",render:(s,g)=>e(v,{loading:m,onClick:()=>C(g.id),children:"Log"})}),e(r.Column,{align:"center",dataIndex:"t",title:"Delete",render:(s,g)=>e(v,{type:"danger",onClick:()=>{w(g.id)},children:"Delete"})})]}),h(K,{visible:p,footer:null,onCancel:()=>u(!1),children:[h(r,{className:"Modal-table",dataSource:o.results,pagination:!1,size:"small",children:[e(r.Column,{dataIndex:"birthday",title:"Birthday"}),e(r.Column,{width:150,dataIndex:"email",title:"Email",render:s=>e("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:s})}),e(r.Column,{dataIndex:"message",title:"Message",render:s=>e(q,{title:s,children:e("div",{className:"Long-word",style:{},children:s})})}),e(r.Column,{dataIndex:"firstname",title:"First name",render:s=>e("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:s})}),e(r.Column,{dataIndex:"lastname",title:"Last name"}),e(r.Column,{dataIndex:"language",title:"Language"}),e(r.Column,{dataIndex:"only_registration",title:"Only registration",render:s=>e("div",{style:{wordWrap:"break-word",wordBreak:"break-word"},children:s?"yes":"no"})}),e(r.Column,{dataIndex:"over_18",title:"Over 18"}),e(r.Column,{dataIndex:"password",title:"Password"}),e(r.Column,{dataIndex:"phone_number",title:"Phone number"}),e(r.Column,{dataIndex:"preference",title:"Preference"}),e(r.Column,{dataIndex:"referral_code",title:"Referral code"}),e(r.Column,{dataIndex:"smoker",title:"Smoker"}),e(r.Column,{dataIndex:"referral_code",title:"Referral code"}),e(r.Column,{dataIndex:"video_url",title:"Video URL"}),e(r.Column,{dataIndex:"status",title:"Status",render:s=>s==="load"?e("span",{title:"Load",style:{fontWeight:"bold"},children:"Load"}):s==="success"?e("span",{title:"Success",style:{fontWeight:"bold",color:"green"},children:"Success"}):s==="stopped"?e("span",{title:"Stopped",style:{color:"brown",fontWeight:"bold"},children:"Stopped"}):s==="working"?e("span",{title:"Working",style:{color:"orange",fontWeight:"bold"},children:"Working"}):s==="error"?e("span",{title:"Error",style:{fontWeight:"bold",color:"red"},children:"Error"}):e(L,{children:s})})]}),e("div",{className:"Pagination",children:e(ie,{className:"Paginator",totalItems:o.count,pageSize:50,onChange:s=>C(n,s)})})]})]})},de=({docsFile:t,script:a,videoURL:o,setScript:d,setDocsFile:n,taskCount:l,setTaskCount:m,setVideoURL:y})=>{const p=c.exports.useMemo(()=>Boolean(t instanceof File),[t]),u={name:"file",accept:".csv,text/csv",maxCount:1,fileList:t instanceof File?[t]:[],beforeUpload:f=>(n(f),!1),onRemove:()=>{n(null),d("")}};return h("div",{className:"Buttons",children:[e(T,{disabled:!p,checked:a==="default",onChange:()=>{d("default")},children:"Run up"}),e(T,{onChange:()=>{d("click")},checked:a==="click",disabled:!p,children:"Run script (click)"}),e(H,{value:o,onChange:f=>y(f.target.value),placeholder:"Enter video URL (optional)"}),e(G,{min:1,defaultValue:l,value:l,onChange:f=>m(f)}),e("div",{className:"Upload",children:e(J,O(P({},u),{children:e(v,{icon:e(Q,{}),children:" Upload"})}))})]})},ue=({docsFile:t,videoURL:a,scriptType:o,setDocsFile:d,setVideoURL:n,taskCount:l,setTaskCount:m,setDataSource:y})=>{const[p,u]=c.exports.useState("initial"),[f,C]=c.exports.useState(!1),[w,s]=c.exports.useState(""),g=async()=>{u("stopped"),C(!0);const i=await ae();i.data.message&&x.success({message:i.data.message}),C(!1)},S=async()=>{u("working"),C(!0);const i=await se();i.data.message&&x.success({message:i.data.message}),C(!1)},A=async()=>{if(!o)return x.error({message:"Please, select the script type."});if(!(t instanceof File))return x.error({message:"Please, select the .csv file."});C(!0);const i=o==="default"?"true":"false";try{const b=new FormData;b.append("file",t),b.append("tasks_per_day",l),b.append("only_registration",i),a&&b.append("video_url",a);const R=await te(b);d(null),m(3e3),n(""),setTimeout(async()=>{const D=await W();await k(),y(D.data)},4e3),C(!1),R.data.message&&x.success({message:R.data.message})}catch(b){x.error({message:b.response.data.message})}},B=async()=>{const i=await oe();s(i.data.balance)},k=async()=>{try{const i=await ne();i.data.bots_status==="working"&&u("working"),i.data.bots_status==="stopped"&&u("stopped"),i.data.bots_status==="success"&&(u("final"),x.info({message:"All the tasks are over."}))}catch{u("final")}};return c.exports.useEffect(()=>{let i;return p!=="final"&&(i=setInterval(k,3*1e3)),()=>{clearInterval(i)}},[p]),c.exports.useEffect(()=>{k(),B();const i=setInterval(B,25*1e3);return()=>{clearInterval(i)}},[]),h(L,{children:[e("div",{className:"Control-buttons",children:p==="initial"||p==="final"?e(v,{type:"primary",onClick:A,loading:f,children:"Start"}):p==="working"?e(L,{children:e(v,{type:"primary",onClick:g,loading:f,children:"Stop"})}):e(v,{type:"primary",onClick:S,loading:f,children:"Resume"})}),h("div",{className:"Captcha-status",children:["CAPTCHA balance status:",h("span",{style:{color:w<1?"red":"black"},children:["$",w]})]})]})};function pe(){const[t,a]=c.exports.useState(null),[o,d]=c.exports.useState(""),[n,l]=c.exports.useState(""),[m,y]=c.exports.useState([]),[p,u]=c.exports.useState(3e3);return e("div",{className:"App",children:h(X,{children:[h(U,{className:"Items",span:15,children:[e(de,{docsFile:t,videoURL:o,script:n,setScript:l,setVideoURL:d,setDocsFile:a,taskCount:p,setTaskCount:u}),e(ce,{dataSource:m,setDataSource:y})]}),e(U,{offset:1,span:8,children:e(ue,{docsFile:t,scriptType:n,videoURL:o,setVideoURL:d,setDocsFile:a,setDataSource:y,taskCount:p,setTaskCount:u})})]})})}Y.render(e(Z.StrictMode,{children:e(pe,{})}),document.getElementById("root"));
